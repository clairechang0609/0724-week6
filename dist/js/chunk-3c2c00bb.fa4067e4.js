(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c2c00bb"],{1799:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"pagination"},[n("li",{class:{disabled:1===t.pages.current_page}},[n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pages.current_page-1)}}},[t._v(" ← ")])]),t._l(t.pages.total_pages,(function(e,a){return n("li",{key:a+e,class:{active:e===t.pages.current_page}},[n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.changePage(e)}}},[t._v(t._s(e))])])})),n("li",{class:{disabled:t.pages.current_page===t.pages.total_pages}},[n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pages.current_page+1)}}},[t._v(" → ")])])],2)},o=[],i={props:["pages"],methods:{changePage:function(t){this.$emit("changepage",t)}}},s=i,c=n("2877"),d=Object(c["a"])(s,a,o,!1,null,null,null);e["a"]=d.exports},"2e25":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"coupon"},[n("button",{staticClass:"add-coupon",attrs:{type:"button"},on:{click:function(e){return t.openModal("new")}}},[t._v("新增優惠券")]),n("table",[t._m(0),t._l(t.coupons,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.title))]),n("td",[t._v(t._s(e.code))]),n("td",[t._v(t._s(e.percent)+"%")]),n("td",[t._v(t._s(e.deadline.datetime))]),n("td",[n("label",{staticClass:"container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.enabled,expression:"coupon.enabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.enabled)?t._i(e.enabled,null)>-1:e.enabled},on:{click:function(n){t.openModal("enabled",e),t.updateCoupon()},change:function(n){var a=e.enabled,o=n.target,i=!!o.checked;if(Array.isArray(a)){var s=null,c=t._i(a,s);o.checked?c<0&&t.$set(e,"enabled",a.concat([s])):c>-1&&t.$set(e,"enabled",a.slice(0,c).concat(a.slice(c+1)))}else t.$set(e,"enabled",i)}}}),n("span",{staticClass:"checkmark"}),n("p",[t._v("啟用")])])]),n("td",{staticClass:"btn-wrap"},[n("button",{staticClass:"btn-margin",attrs:{type:"button"},on:{click:function(n){return t.openModal("edit",e)}}},[t._v("編輯")]),n("button",{staticClass:"btn-margin",attrs:{type:"button"},on:{click:function(n){return t.openModal("delete",e)}}},[t._v("刪除")])])])}))],2),n("div",{staticClass:"form-wrap",class:{show:t.formShow}},[n("div",{staticClass:"title-bar"},[n("h5",[t._v(t._s(t.newCoupon?"新增產品":"編輯產品"))]),n("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.closeForm()}}},[n("i",{staticClass:"fas fa-times"})])]),n("div",{staticClass:"form"},[n("div",{staticClass:"content"},[n("div",{staticClass:"input-group"},[n("label",{attrs:{for:"title"}},[t._v("優惠券名稱")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.editCoupon.title,expression:"editCoupon.title"}],attrs:{type:"text",id:"title",placeholder:"請輸入優惠券名稱"},domProps:{value:t.editCoupon.title},on:{input:function(e){e.target.composing||t.$set(t.editCoupon,"title",e.target.value)}}})]),n("div",{staticClass:"input-group"},[n("label",{attrs:{for:"code"}},[t._v("優惠碼")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.editCoupon.code,expression:"editCoupon.code"}],attrs:{type:"text",id:"code",placeholder:"請輸入優惠碼"},domProps:{value:t.editCoupon.code},on:{input:function(e){e.target.composing||t.$set(t.editCoupon,"code",e.target.value)}}})]),n("div",{staticClass:"input-group"},[n("label",{attrs:{for:"percent"}},[t._v("折扣百分比")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.editCoupon.percent,expression:"editCoupon.percent"}],attrs:{type:"number",id:"percent",placeholder:"請輸入折扣百分比"},domProps:{value:t.editCoupon.percent},on:{input:function(e){e.target.composing||t.$set(t.editCoupon,"percent",e.target.value)}}})]),n("div",{staticClass:"input-group"},[n("label",{attrs:{for:"due-date"}},[t._v("到期日")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.due_date,expression:"due_date"}],attrs:{type:"date",id:"due-date",placeholder:"請輸入單位"},domProps:{value:t.due_date},on:{input:function(e){e.target.composing||(t.due_date=e.target.value)}}})]),n("div",{staticClass:"input-group"},[n("label",{attrs:{for:"due-time"}},[t._v("到期時間")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.due_time,expression:"due_time"}],attrs:{type:"time",id:"due-time",step:"1",placeholder:"請輸入原價"},domProps:{value:t.due_time},on:{input:function(e){e.target.composing||(t.due_time=e.target.value)}}})]),n("div",{staticClass:"checkbox-group"},[n("label",{attrs:{for:"enabled"}},[t._v("是否啟用")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.editCoupon.enabled,expression:"editCoupon.enabled"}],attrs:{type:"checkbox",id:"enabled"},domProps:{checked:Array.isArray(t.editCoupon.enabled)?t._i(t.editCoupon.enabled,null)>-1:t.editCoupon.enabled},on:{change:function(e){var n=t.editCoupon.enabled,a=e.target,o=!!a.checked;if(Array.isArray(n)){var i=null,s=t._i(n,i);a.checked?s<0&&t.$set(t.editCoupon,"enabled",n.concat([i])):s>-1&&t.$set(t.editCoupon,"enabled",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.editCoupon,"enabled",o)}}})])]),n("div",{staticClass:"submit-btns"},[n("button",{staticClass:"btn-margin",attrs:{type:"button"},on:{click:function(e){return t.closeForm()}}},[t._v("取消")]),n("button",{staticClass:"btn-margin",attrs:{type:"button"},on:{click:function(e){return t.updateCoupon()}}},[t._v("確認")])])])]),n("div",{staticClass:"delete-alert",class:{show:t.deleteShow}},[n("h5",[t._v("刪除優惠券")]),n("p",[t._v("是否刪除 "),n("span",[t._v(t._s(t.editCoupon.title)+"優惠券")]),t._v(" (刪除後將無法恢復)。")]),n("div",{staticClass:"cancel-btns"},[n("button",{staticClass:"btn-margin",attrs:{type:"button"},on:{click:function(e){return t.cancelDelete()}}},[t._v("取消")]),n("button",{staticClass:"btn-margin",attrs:{type:"button"},on:{click:function(e){return t.deleteCoupon()}}},[t._v("確認")])])])]),n("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),n("div",{staticClass:"mask",class:{open:t.shadowOpen}}),n("pagination",{tag:"div",attrs:{pages:t.pagination},on:{changepage:t.getCoupons}})],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{staticClass:"table-title"},[n("th",{attrs:{width:"20%"}},[t._v("優惠券名稱")]),n("th",{attrs:{width:"17%"}},[t._v("折扣碼")]),n("th",{attrs:{width:"13%"}},[t._v("折扣百分比")]),n("th",{attrs:{width:"20%"}},[t._v("到期日")]),n("th",{attrs:{width:"15%"}},[t._v("是否啟用")]),n("th",{attrs:{width:"20%"}},[t._v("編輯 / 刪除")])])}],i=(n("99af"),n("ac1f"),n("1276"),n("1799")),s={components:{pagination:i["a"]},data:function(){return{coupons:[],editCoupon:{deadline_at:""},pagination:{},newCoupon:!0,token:"",shadowOpen:!1,formShow:!1,deleteShow:!1,isLoading:!1,due_date:"",due_time:""}},created:function(){this.getCoupons()},methods:{getCoupons:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var n="".concat("https://course-ec-api.hexschool.io/api/").concat("9fbd3898-4d4d-4c65-a3cf-6af8511169fb","/admin/ec/coupons?page=").concat(e);this.$http.defaults.headers.common.Authorization="Bearer ".concat(this.token),this.$http.get(n).then((function(e){t.isLoading=!1,t.coupons=e.data.data,t.pagination=e.data.meta.pagination,console.log(t.coupons)})).catch((function(e){t.isLoading=!1,console.log(e)}))},openModal:function(t,e){switch(this.due_date="",this.due_time="",t){case"new":this.newCoupon=!0,this.editCoupon={deadline_at:""},this.formShow=!0,this.shadowOpen=!0;break;case"edit":this.newCoupon=!1,this.editCoupon=Object.assign({},e),this.formShow=!0,this.shadowOpen=!0;var n=this.editCoupon.deadline.datetime.split(" ");this.due_date=n[0],this.due_time=n[1];break;case"enabled":this.newCoupon=!1,this.editCoupon=Object.assign({},e),this.editCoupon.enabled=!this.editCoupon.enabled;break;case"delete":this.editCoupon=Object.assign({},e),this.deleteShow=!0,this.shadowOpen=!0}},updateCoupon:function(){var t=this;this.isLoading=!0;var e="",n="";this.newCoupon?(e="".concat("https://course-ec-api.hexschool.io/api/").concat("9fbd3898-4d4d-4c65-a3cf-6af8511169fb","/admin/ec/coupon"),n="post"):(e="".concat("https://course-ec-api.hexschool.io/api/").concat("9fbd3898-4d4d-4c65-a3cf-6af8511169fb","/admin/ec/coupon/").concat(this.editCoupon.id),n="patch"),this.editCoupon.deadline_at="".concat(this.due_date," ").concat(this.due_time),this.$http[n](e,this.editCoupon).then((function(){t.isLoading=!1,t.getCoupons()})).catch((function(e){t.isLoading=!1,console.log(e)})),this.formShow=!1,this.shadowOpen=!1},deleteCoupon:function(){var t=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io/api/").concat("9fbd3898-4d4d-4c65-a3cf-6af8511169fb","/admin/ec/coupon/").concat(this.editProduct.id);this.$http.delete(e).then((function(e){t.isLoading=!1,t.getCoupons()})).catch((function(e){t.isLoading=!1,console.log(e)})),this.deleteShow=!1,this.shadowOpen=!1},closeForm:function(){this.formShow=!1,this.shadowOpen=!1},cancelDelete:function(){this.deleteShow=!1,this.shadowOpen=!1}}},c=s,d=n("2877"),r=Object(d["a"])(c,a,o,!1,null,null,null);e["default"]=r.exports},8418:function(t,e,n){"use strict";var a=n("c04e"),o=n("9bf2"),i=n("5c6c");t.exports=function(t,e,n){var s=a(e);s in t?o.f(t,s,i(0,n)):t[s]=n}},"99af":function(t,e,n){"use strict";var a=n("23e7"),o=n("d039"),i=n("e8b5"),s=n("861d"),c=n("7b0b"),d=n("50c4"),r=n("8418"),u=n("65f0"),l=n("1dde"),p=n("b622"),h=n("2d00"),v=p("isConcatSpreadable"),f=9007199254740991,g="Maximum allowed index exceeded",b=h>=51||!o((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),m=l("concat"),C=function(t){if(!s(t))return!1;var e=t[v];return void 0!==e?!!e:i(t)},_=!b||!m;a({target:"Array",proto:!0,forced:_},{concat:function(t){var e,n,a,o,i,s=c(this),l=u(s,0),p=0;for(e=-1,a=arguments.length;e<a;e++)if(i=-1===e?s:arguments[e],C(i)){if(o=d(i.length),p+o>f)throw TypeError(g);for(n=0;n<o;n++,p++)n in i&&r(l,p,i[n])}else{if(p>=f)throw TypeError(g);r(l,p++,i)}return l.length=p,l}})}}]);
//# sourceMappingURL=chunk-3c2c00bb.fa4067e4.js.map